<!-- Sticky Video Component - Reusable HTML Block, goes between closing main and body tags -->
<style>
    /* Content Layout Adjustments for Video - Target Jupyter-specific classes */
    body.jp-Notebook {
        margin-right: 35% !important; /* Make room for the sticky video */
        padding-right: 0px !important; /* Add some padding from the video */
    }
  
    /* Target Jupyter's main content area */
    body.jp-Notebook main {
        text-align: left !important;
        max-width: none !important;
        margin: 0 !important;
        padding: 20px !important;
    }
  
    /* Target Jupyter cells specifically */
    body.jp-Notebook .jp-Cell {
        text-align: left !important;
        max-width: none !important;
    }
  
    /* Target markdown cells specifically */
    body.jp-Notebook .jp-MarkdownCell .jp-RenderedHTMLCommon {
        text-align: left !important;
        max-width: none !important;
    }
  
    /* Sticky Video Component Styles */
    .sticky-video-container {
        position: fixed;
        top: 20px;
        right: 20px;
        width: 35%; /* Increased size for better visibility */
        max-width: 500px;
        min-width: 400px;
        z-index: 1000;
        background: #fff;
        border-radius: 12px; /* Increased for more rounded edges */
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        overflow: visible; /* Changed from hidden to visible to prevent clipping */
        transition: all 0.3s ease;
    }
    
    /* Responsive behavior for small devices */
    @media (max-width: 768px) {
        body.jp-Notebook {
            margin-right: 0 !important; /* Remove margin on small screens */
            padding-right: 0 !important;
            padding-top: 320px !important; /* Add padding to push content below video */
        }
        
        body.jp-Notebook main {
            padding: 10px !important;
        }
        
        .sticky-video-container {
            position: fixed !important; /* Keep fixed position on mobile */
            top: 10px !important; /* Position at top */
            right: 10px !important; /* Position at right */
            left: 10px !important; /* Full width on mobile */
            width: auto !important; /* Auto width to fill available space */
            max-width: none !important;
            min-width: auto !important;
            margin: 0 !important; /* Remove margins */
            border-radius: 12px; /* Keep rounded edges on mobile */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1001 !important; /* Ensure it stays on top */
        }
    }
    
    /* Video wrapper for responsive aspect ratio */
    .sticky-video-wrapper {
        position: relative;
        width: 100%;
        height: 0;
        padding-bottom: 56.25%; /* 16:9 aspect ratio */
        background: #000;
        /* Ensure video controls are visible */
        min-height: 200px;
    }
    
    .sticky-video-wrapper iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border: none;
    }
    
    /* Video title/header */
    .sticky-video-header {
        padding: 12px 16px;
        background: #f8f9fa;
        border-bottom: 1px solid #e9ecef;
        font-size: 14px;
        font-weight: 600;
        color: #495057;
        line-height: 1.4;
    }
    
    /* Close button for better UX */
    .sticky-video-close {
        position: absolute;
        top: 8px;
        right: 8px;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        border: none;
        border-radius: 50%;
        width: 24px;
        height: 24px;
        cursor: pointer;
        font-size: 14px;
        line-height: 1;
        z-index: 1001;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .sticky-video-close:hover {
        background: rgba(0, 0, 0, 0.9);
    }
    
    /* Ensure the video doesn't interfere with parent containers */
    .sticky-video-container * {
        box-sizing: border-box;
    }
  
    /* Additional styles for LMS embedding */
    .sticky-video-container {
        /* Ensure container doesn't get clipped by parent */
        transform: translateZ(0); /* Force hardware acceleration */
        will-change: transform; /* Optimize for animations */
    }
  
    /* Ensure iframe has proper dimensions for video controls */
    .sticky-video-wrapper iframe {
        /* Ensure video player controls are fully visible */
        min-height: 200px;
        /* Allow video to scale properly */
        object-fit: contain;
        /* Force video player to show all controls */
        width: 100% !important;
        height: 100% !important;
    }
  
    /* Ensure video player controls are always visible */
    .sticky-video-wrapper iframe[src*="thinkific"] {
        /* Force the video player to display all controls */
        min-height: 250px; /* Increased height for better control visibility */
    }
  
    /* Override any video player CSS that might hide controls */
    .sticky-video-container .videoproxy_embed {
        width: 100% !important;
        height: 100% !important;
        min-height: 250px !important;
    }
  
    /* Fallback for very constrained environments */
    @media (max-width: 1200px) {
        .sticky-video-container {
            width: 35%;
            max-width: 450px;
            min-width: 350px;
        }
    }
  
    @media (max-width: 900px) {
        .sticky-video-container {
            width: 40%;
            max-width: 400px;
            min-width: 320px;
        }
    }
    </style>
    
    <div class="sticky-video-container" id="stickyVideoContainer">
        <div class="sticky-video-header">
            Ray Serve Observability Walkthrough
        </div>
        <div class="sticky-video-wrapper">
            <iframe 
                src="https://platform.thinkific.com/videoproxy/v1/play/d3b5t0agfjrs72o8k2ag?allow-resize=true" 
                scrolling="no" 
                class="videoproxy_embed" 
                title="03 Ray Serve Observability Walkthrough Tutorial.mp4 - 11:42" 
                name="videoproxy_embed" 
                allowfullscreen="">
            </iframe>
        </div>
        <button class="sticky-video-close" onclick="document.getElementById('stickyVideoContainer').style.display='none'">
            Ã—
        </button>
    </div>
    
    <script>
    // Optional: Add some JavaScript for enhanced functionality
    (function() {
        const videoContainer = document.getElementById('stickyVideoContainer');
        
        // Keep video visible on all screen sizes
        function handleResize() {
            // Always show the video, regardless of screen size
            videoContainer.style.display = 'block';
        }
        
        // Listen for resize events
        window.addEventListener('resize', handleResize);
        
        // Initial check
        handleResize();
        
        // Optional: Auto-hide after 30 seconds of inactivity
        let hideTimeout;
        function resetHideTimeout() {
            clearTimeout(hideTimeout);
            videoContainer.style.opacity = '1';
            hideTimeout = setTimeout(() => {
                videoContainer.style.opacity = '0.7';
            }, 30000);
        }
        
        // Reset timeout on user interaction
        document.addEventListener('scroll', resetHideTimeout);
        document.addEventListener('mousemove', resetHideTimeout);
        
        // Initialize
        resetHideTimeout();
    })();
    </script>